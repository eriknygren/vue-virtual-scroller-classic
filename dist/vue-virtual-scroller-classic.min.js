var VueVirtualScroller=function(e,t,i){"use strict";var s={itemsLimit:1e3};let n;function r(){r.init||(r.init=!0,n=-1!==function(){var e=window.navigator.userAgent,t=e.indexOf("MSIE ");if(t>0)return parseInt(e.substring(t+5,e.indexOf(".",t)),10);if(e.indexOf("Trident/")>0){var i=e.indexOf("rv:");return parseInt(e.substring(i+3,e.indexOf(".",i)),10)}var s=e.indexOf("Edge/");return s>0?parseInt(e.substring(s+5,e.indexOf(".",s)),10):-1}())}var o={name:"ResizeObserver",props:{emitOnMount:{type:Boolean,default:!1},ignoreWidth:{type:Boolean,default:!1},ignoreHeight:{type:Boolean,default:!1}},emits:["notify"],mounted(){r(),t.nextTick(()=>{this._w=this.$el.offsetWidth,this._h=this.$el.offsetHeight,this.emitOnMount&&this.emitSize()});const e=document.createElement("object");this._resizeObject=e,e.setAttribute("aria-hidden","true"),e.setAttribute("tabindex",-1),e.onload=this.addResizeHandlers,e.type="text/html",n&&this.$el.appendChild(e),e.data="about:blank",n||this.$el.appendChild(e)},beforeUnmount(){this.removeResizeHandlers()},methods:{compareAndNotify(){(!this.ignoreWidth&&this._w!==this.$el.offsetWidth||!this.ignoreHeight&&this._h!==this.$el.offsetHeight)&&(this._w=this.$el.offsetWidth,this._h=this.$el.offsetHeight,this.emitSize())},emitSize(){this.$emit("notify",{width:this._w,height:this._h})},addResizeHandlers(){this._resizeObject.contentDocument.defaultView.addEventListener("resize",this.compareAndNotify),this.compareAndNotify()},removeResizeHandlers(){this._resizeObject&&this._resizeObject.onload&&(!n&&this._resizeObject.contentDocument&&this._resizeObject.contentDocument.defaultView.removeEventListener("resize",this.compareAndNotify),this.$el.removeChild(this._resizeObject),this._resizeObject.onload=null,this._resizeObject=null)}}};const l=t.withScopeId("data-v-b329ee4c");t.pushScopeId("data-v-b329ee4c");const a={class:"resize-observer",tabindex:"-1"};t.popScopeId();const h=l((e,i,s,n,r,o)=>(t.openBlock(),t.createBlock("div",a)));o.render=h,o.__scopeId="data-v-b329ee4c",o.__file="src/components/ResizeObserver.vue";var d="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};var c=function(e){var t={exports:{}};return e(t,t.exports),t.exports}((function(e){var t,i;t=d,i=function(){var e=/(auto|scroll)/,t=function(e,i){return null===e.parentNode?i:t(e.parentNode,i.concat([e]))},i=function(e,t){return getComputedStyle(e,null).getPropertyValue(t)},s=function(t){return e.test(function(e){return i(e,"overflow")+i(e,"overflow-y")+i(e,"overflow-x")}(t))};return function(e){if(e instanceof HTMLElement||e instanceof SVGElement){for(var i=t(e.parentNode,[]),n=0;n<i.length;n+=1)if(s(i[n]))return i[n];return document.scrollingElement||document.documentElement}}},e.exports?e.exports=i():t.Scrollparent=i()})),u=!1;if("undefined"!=typeof window){u=!1;try{var m=Object.defineProperty({},"passive",{get:function(){u=!0}});window.addEventListener("test",null,m)}catch(e){}}var p={name:"VirtualScroller",mixins:[{components:{ResizeObserver:o},directives:{ObserveVisibility:i.ObserveVisibility},props:{items:{type:Array,required:!0},itemHeight:{type:[Number,String],default:null},minItemHeight:{type:[Number,String],default:null},heightField:{type:String,default:"height"},typeField:{type:String,default:"type"},buffer:{type:[Number,String],default:200},pageMode:{type:Boolean,default:!1},prerender:{type:[Number,String],default:0},emitUpdate:{type:Boolean,default:!1}},computed:{cssClass:function(){return{"page-mode":this.pageMode}},heights:function(){if(null===this.itemHeight){for(var e,t={"-1":{accumulator:0}},i=this.items,s=this.heightField,n=this.minItemHeight,r=0,o=0,l=i.length;o<l;o++)r+=e=i[o][s]||n,t[o]={accumulator:r,height:e};return t}return{}}},beforeUnmount:function(){this.removeListeners()},methods:{getListenerTarget:function(){var e=c(this.$el);return e!==window.document.documentElement&&e!==window.document.body||(e=window),e},getScroll:function(){var e,t=this.$el;if(this.pageMode){var i=t.getBoundingClientRect(),s=-i.top,n=window.innerHeight;s<0&&(n+=s,s=0),s+n>i.height&&(n=i.height-s),e={top:s,bottom:s+n}}else e={top:t.scrollTop,bottom:t.scrollTop+t.clientHeight};return e},applyPageMode:function(){this.pageMode?this.addListeners():this.removeListeners()},addListeners:function(){this.listenerTarget=this.getListenerTarget(),this.listenerTarget.addEventListener("scroll",this.handleScroll,!!u&&{passive:!0}),this.listenerTarget.addEventListener("resize",this.handleResize)},removeListeners:function(){this.listenerTarget&&(this.listenerTarget.removeEventListener("scroll",this.handleScroll),this.listenerTarget.removeEventListener("resize",this.handleResize),this.listenerTarget=null)},scrollToItem:function(e){var t;t=null===this.itemHeight?e>0?this.heights[e-1].accumulator:0:e*this.itemHeight,this.scrollToPosition(t)},scrollToPosition:function(e){this.$el.scrollTop=e},itemsLimitError:function(){var e=this;throw setTimeout((function(){console.log("It seems the scroller element isn't scrolling, so it tries to render all the items at once.","Scroller:",e.$el),console.log("Make sure the scroller has a fixed height and 'overflow-y' set to 'auto' so it can scroll correctly and only render the items visible in the scroll viewport.")})),new Error("Rendered items limit reached")}}}],props:{renderers:{type:Object,default:null},keyField:{type:String,default:"id"},mainTag:{type:String,default:"div"},containerTag:{type:String,default:"div"},containerClass:{type:[String,Array,Object],default:null},contentTag:{type:String,default:"div"},contentClass:{type:[String,Array,Object],default:null},poolSize:{type:[Number,String],default:2e3},delayPreviousItems:{type:Boolean,default:!1}},emits:["resize","visible","hidden","update"],data:()=>({visibleItems:[],itemContainerStyle:null,itemsStyle:null,keysEnabled:!0}),watch:{items:{handler(){this.updateVisibleItems(!0)},deep:!0},pageMode(){this.applyPageMode(),this.updateVisibleItems(!0)},itemHeight:"setDirty"},created(){this.$_ready=!1,this.$_startIndex=0,this.$_oldScrollTop=null,this.$_oldScrollBottom=null,this.$_offsetTop=0,this.$_height=0,this.$_scrollDirty=!1,this.$_updateDirty=!1;const e=parseInt(this.prerender);e>0?(this.visibleItems=this.items.slice(0,e),this.$_length=this.visibleItems.length,this.$_endIndex=this.$_length-1,this.$_skip=!0):(this.$_endIndex=0,this.$_length=0,this.$_skip=!1)},mounted(){this.applyPageMode(),this.$nextTick(()=>{this.updateVisibleItems(!0),this.$_ready=!0})},methods:{updateVisibleItems(e=!1){this.$_updateDirty||(this.$_updateDirty=!0,this.$nextTick(()=>{this.$_updateDirty=!1;const t=this.items.length,i=this.getScroll(),n=this.items,r=this.itemHeight;let o,l;if(i){let a=-1,h=-1;const d=parseInt(this.buffer),c=parseInt(this.poolSize),u=~~(i.top/c)*c-d,m=Math.ceil(i.bottom/c)*c+d;if(!e&&(u===this.$_oldScrollTop&&m===this.$_oldScrollBottom||this.$_skip))return void(this.$_skip=!1);if(this.$_oldScrollTop=u,this.$_oldScrollBottom=m,null===r){const e=this.heights;let i,s,r=0,d=t-1,c=~~(t/2);do{s=c,i=e[c].accumulator,i<u?r=c:c<t-1&&e[c+1].accumulator>u&&(d=c),c=~~((r+d)/2)}while(c!==s);for(c<0&&(c=0),a=c,l=c>0?e[c-1].accumulator:0,o=e[t-1].accumulator,h=c;h<t&&e[h].accumulator<m;h++);-1===h?h=n.length-1:(h++,h>t&&(h=t))}else a=~~(u/r),h=Math.ceil(m/r),a<0&&(a=0),h>t&&(h=t),l=a*r,o=t*r;h-a>s.itemsLimit&&this.itemsLimitError(),(e||this.$_startIndex!==a||this.$_endIndex!==h||this.$_offsetTop!==l||this.$_height!==o||this.$_length!==t)&&(this.keysEnabled=!(a>this.$_endIndex||h<this.$_startIndex),this.itemContainerStyle={height:o+"px"},this.itemsStyle={marginTop:l+"px"},this.delayPreviousItems?(this.visibleItems=n.slice(this.$_startIndex,h),this.$nextTick(()=>{this.visibleItems=n.slice(a,h)})):this.visibleItems=n.slice(a,h),this.emitUpdate&&this.$emit("update",a,h),this.$_startIndex=a,this.$_endIndex=h,this.$_length=t,this.$_offsetTop=l,this.$_height=o)}}))},setDirty(){this.$_oldScrollTop=null,this.$_oldScrollBottom=null},handleScroll(){this.$_scrollDirty||(this.$_scrollDirty=!0,requestAnimationFrame(()=>{this.$_scrollDirty=!1,this.updateVisibleItems()}))},handleResize(){this.$emit("resize"),this.$_ready&&this.updateVisibleItems()},handleVisibilityChange(e,t){this.$_ready&&(e||0!==t.boundingClientRect.width||0!==t.boundingClientRect.height)&&(this.$emit("visible"),this.$nextTick(()=>{this.updateVisibleItems()}))}}};p.render=function(e,i,s,n,r,o){const l=t.resolveComponent("resize-observer"),a=t.resolveDirective("observe-visibility");return t.withDirectives((t.openBlock(),t.createBlock(t.resolveDynamicComponent(s.mainTag),{class:t.normalizeClass([e.cssClass,"virtual-scroller"]),onScrollPassive:o.handleScroll},{default:t.withCtx(()=>[t.renderSlot(e.$slots,"before-container"),(t.openBlock(),t.createBlock(t.resolveDynamicComponent(s.containerTag),{ref:"itemContainer",class:t.normalizeClass([s.containerClass,"item-container"]),style:t.normalizeStyle(r.itemContainerStyle)},{default:t.withCtx(()=>[t.renderSlot(e.$slots,"before-content"),(t.openBlock(),t.createBlock(t.resolveDynamicComponent(s.contentTag),{ref:"items",class:t.normalizeClass([s.contentClass,"items"]),style:t.normalizeStyle(r.itemsStyle)},{default:t.withCtx(()=>[s.renderers?(t.openBlock(!0),t.createElementBlock(t.Fragment,{key:0},t.renderList(r.visibleItems,(i,n)=>(t.openBlock(),t.createBlock(t.resolveDynamicComponent(s.renderers[i[e.typeField]]),{key:r.keysEnabled&&i[s.keyField]||void 0,item:i,"item-index":e.$_startIndex+n,class:"item"},null,8,["item","item-index"]))),128)):(t.openBlock(!0),t.createElementBlock(t.Fragment,{key:1},t.renderList(r.visibleItems,(i,n)=>t.renderSlot(e.$slots,"default",{item:i,itemIndex:e.$_startIndex+n,itemKey:r.keysEnabled&&i[s.keyField]||void 0,class:"item"})),256))]),_:3},8,["class","style"])),t.renderSlot(e.$slots,"after-content")]),_:3},8,["class","style"])),t.renderSlot(e.$slots,"after-container"),t.createVNode(l,{onNotify:o.handleResize},null,8,["onNotify"])]),_:3},40,["class","onScrollPassive"])),[[a,o.handleVisibilityChange]])},p.__scopeId="data-v-727d6836",p.__file="src/components/VirtualScroller.vue";var f={version:"1.1.4",install:function(e,t){var i=Object.assign({},{installComponents:!0,componentsPrefix:""},t);for(var n in i)void 0!==i[n]&&(s[n]=i[n]);i.installComponents&&function(e,t){e.component("".concat(t,"virtual-scroller"),p)}(e,i.componentsPrefix)}};return e.VirtualScroller=p,e.default=f,Object.defineProperty(e,"__esModule",{value:!0}),e}({},Vue,vueObserveVisibility);
//# sourceMappingURL=vue-virtual-scroller-classic.min.js.map
