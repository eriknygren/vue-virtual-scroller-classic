var VueVirtualScroller=function(e,t){"use strict";var i={itemsLimit:1e3};let n;function r(){r.init||(r.init=!0,n=-1!==function(){var e=window.navigator.userAgent,t=e.indexOf("MSIE ");if(t>0)return parseInt(e.substring(t+5,e.indexOf(".",t)),10);if(e.indexOf("Trident/")>0){var i=e.indexOf("rv:");return parseInt(e.substring(i+3,e.indexOf(".",i)),10)}var n=e.indexOf("Edge/");return n>0?parseInt(e.substring(n+5,e.indexOf(".",n)),10):-1}())}var s={name:"ResizeObserver",props:{emitOnMount:{type:Boolean,default:!1},ignoreWidth:{type:Boolean,default:!1},ignoreHeight:{type:Boolean,default:!1}},emits:["notify"],mounted(){r(),t.nextTick(()=>{this._w=this.$el.offsetWidth,this._h=this.$el.offsetHeight,this.emitOnMount&&this.emitSize()});const e=document.createElement("object");this._resizeObject=e,e.setAttribute("aria-hidden","true"),e.setAttribute("tabindex",-1),e.onload=this.addResizeHandlers,e.type="text/html",n&&this.$el.appendChild(e),e.data="about:blank",n||this.$el.appendChild(e)},beforeUnmount(){this.removeResizeHandlers()},methods:{compareAndNotify(){(!this.ignoreWidth&&this._w!==this.$el.offsetWidth||!this.ignoreHeight&&this._h!==this.$el.offsetHeight)&&(this._w=this.$el.offsetWidth,this._h=this.$el.offsetHeight,this.emitSize())},emitSize(){this.$emit("notify",{width:this._w,height:this._h})},addResizeHandlers(){this._resizeObject.contentDocument.defaultView.addEventListener("resize",this.compareAndNotify),this.compareAndNotify()},removeResizeHandlers(){this._resizeObject&&this._resizeObject.onload&&(!n&&this._resizeObject.contentDocument&&this._resizeObject.contentDocument.defaultView.removeEventListener("resize",this.compareAndNotify),this.$el.removeChild(this._resizeObject),this._resizeObject.onload=null,this._resizeObject=null)}}};const o=t.withScopeId("data-v-b329ee4c");t.pushScopeId("data-v-b329ee4c");const l={class:"resize-observer",tabindex:"-1"};t.popScopeId();const a=o((e,i,n,r,s,o)=>(t.openBlock(),t.createBlock("div",l)));function c(e){return(c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function h(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function d(e){return function(e){if(Array.isArray(e))return u(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return u(e,t);var i=Object.prototype.toString.call(e).slice(8,-1);"Object"===i&&e.constructor&&(i=e.constructor.name);if("Map"===i||"Set"===i)return Array.from(e);if("Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return u(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function u(e,t){(null==t||t>e.length)&&(t=e.length);for(var i=0,n=new Array(t);i<t;i++)n[i]=e[i];return n}s.render=a,s.__scopeId="data-v-b329ee4c",s.__file="src/components/ResizeObserver.vue";var f=function(){function e(t,i,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.el=t,this.observer=null,this.frozen=!1,this.createObserver(i,n)}var i,n,r;return i=e,(n=[{key:"createObserver",value:function(e,i){var n=this;if(this.observer&&this.destroyObserver(),!this.frozen){var r;if(this.options="function"==typeof(r=e)?{callback:r}:r,this.callback=function(e,t){n.options.callback(e,t),e&&n.options.once&&(n.frozen=!0,n.destroyObserver())},this.callback&&this.options.throttle){var s=(this.options.throttleOptions||{}).leading;this.callback=function(e,t){var i,n,r,s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},o=function(o){for(var l=arguments.length,a=new Array(l>1?l-1:0),c=1;c<l;c++)a[c-1]=arguments[c];if(r=a,!i||o!==n){var h=s.leading;"function"==typeof h&&(h=h(o,n)),i&&o===n||!h||e.apply(void 0,[o].concat(d(r))),n=o,clearTimeout(i),i=setTimeout((function(){e.apply(void 0,[o].concat(d(r))),i=0}),t)}};return o._clear=function(){clearTimeout(i),i=null},o}(this.callback,this.options.throttle,{leading:function(e){return"both"===s||"visible"===s&&e||"hidden"===s&&!e}})}this.oldResult=void 0,this.observer=new IntersectionObserver((function(e){var t=e[0];if(e.length>1){var i=e.find((function(e){return e.isIntersecting}));i&&(t=i)}if(n.callback){var r=t.isIntersecting&&t.intersectionRatio>=n.threshold;if(r===n.oldResult)return;n.oldResult=r,n.callback(r,t)}}),this.options.intersection),t.nextTick((function(){n.observer&&n.observer.observe(n.el)}))}}},{key:"destroyObserver",value:function(){this.observer&&(this.observer.disconnect(),this.observer=null),this.callback&&this.callback._clear&&(this.callback._clear(),this.callback=null)}},{key:"threshold",get:function(){return this.options.intersection&&"number"==typeof this.options.intersection.threshold?this.options.intersection.threshold:0}}])&&h(i.prototype,n),r&&h(i,r),e}();function m(e,t,i){var n=t.value;if(n)if("undefined"==typeof IntersectionObserver)console.warn("[vue-observe-visibility] IntersectionObserver API is not available in your browser. Please install this polyfill: https://github.com/w3c/IntersectionObserver/tree/master/polyfill");else{var r=new f(e,n,i);e._vue_visibilityState=r}}function p(e){var t=e._vue_visibilityState;t&&(t.destroyObserver(),delete e._vue_visibilityState)}var v={beforeMount:m,updated:function(e,t,i){var n=t.value;if(!function e(t,i){if(t===i)return!0;if("object"===c(t)){for(var n in t)if(!e(t[n],i[n]))return!1;return!0}return!1}(n,t.oldValue)){var r=e._vue_visibilityState;n?r?r.createObserver(n,i):m(e,{value:n},i):p(e)}},unmounted:p},y="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};var b=function(e){var t={exports:{}};return e(t,t.exports),t.exports}((function(e){var t,i;t=y,i=function(){var e=/(auto|scroll)/,t=function(e,i){return null===e.parentNode?i:t(e.parentNode,i.concat([e]))},i=function(e,t){return getComputedStyle(e,null).getPropertyValue(t)},n=function(t){return e.test(function(e){return i(e,"overflow")+i(e,"overflow-y")+i(e,"overflow-x")}(t))};return function(e){if(e instanceof HTMLElement||e instanceof SVGElement){for(var i=t(e.parentNode,[]),r=0;r<i.length;r+=1)if(n(i[r]))return i[r];return document.scrollingElement||document.documentElement}}},e.exports?e.exports=i():t.Scrollparent=i()})),g=!1;if("undefined"!=typeof window){g=!1;try{var _=Object.defineProperty({},"passive",{get:function(){g=!0}});window.addEventListener("test",null,_)}catch(e){}}var $={name:"VirtualScroller",mixins:[{components:{ResizeObserver:s},directives:{ObserveVisibility:v},props:{items:{type:Array,required:!0},itemHeight:{type:[Number,String],default:null},minItemHeight:{type:[Number,String],default:null},heightField:{type:String,default:"height"},typeField:{type:String,default:"type"},buffer:{type:[Number,String],default:200},pageMode:{type:Boolean,default:!1},prerender:{type:[Number,String],default:0},emitUpdate:{type:Boolean,default:!1}},computed:{cssClass:function(){return{"page-mode":this.pageMode}},heights:function(){if(null===this.itemHeight){for(var e,t={"-1":{accumulator:0}},i=this.items,n=this.heightField,r=this.minItemHeight,s=0,o=0,l=i.length;o<l;o++)s+=e=i[o][n]||r,t[o]={accumulator:s,height:e};return t}return{}}},beforeUnmount:function(){this.removeListeners()},methods:{getListenerTarget:function(){var e=b(this.$el);return e!==window.document.documentElement&&e!==window.document.body||(e=window),e},getScroll:function(){var e,t=this.$el;if(this.pageMode){var i=t.getBoundingClientRect(),n=-i.top,r=window.innerHeight;n<0&&(r+=n,n=0),n+r>i.height&&(r=i.height-n),e={top:n,bottom:n+r}}else e={top:t.scrollTop,bottom:t.scrollTop+t.clientHeight};return e},applyPageMode:function(){this.pageMode?this.addListeners():this.removeListeners()},addListeners:function(){this.listenerTarget=this.getListenerTarget(),this.listenerTarget.addEventListener("scroll",this.handleScroll,!!g&&{passive:!0}),this.listenerTarget.addEventListener("resize",this.handleResize)},removeListeners:function(){this.listenerTarget&&(this.listenerTarget.removeEventListener("scroll",this.handleScroll),this.listenerTarget.removeEventListener("resize",this.handleResize),this.listenerTarget=null)},scrollToItem:function(e){var t;t=null===this.itemHeight?e>0?this.heights[e-1].accumulator:0:e*this.itemHeight,this.scrollToPosition(t)},scrollToPosition:function(e){this.$el.scrollTop=e},itemsLimitError:function(){var e=this;throw setTimeout((function(){console.log("It seems the scroller element isn't scrolling, so it tries to render all the items at once.","Scroller:",e.$el),console.log("Make sure the scroller has a fixed height and 'overflow-y' set to 'auto' so it can scroll correctly and only render the items visible in the scroll viewport.")})),new Error("Rendered items limit reached")}}}],props:{renderers:{type:Object,default:null},keyField:{type:String,default:"id"},mainTag:{type:String,default:"div"},containerTag:{type:String,default:"div"},containerClass:{type:[String,Array,Object],default:null},contentTag:{type:String,default:"div"},contentClass:{type:[String,Array,Object],default:null},poolSize:{type:[Number,String],default:2e3},delayPreviousItems:{type:Boolean,default:!1}},emits:["resize","visible","hidden","update"],data:()=>({visibleItems:[],itemContainerStyle:null,itemsStyle:null,keysEnabled:!0}),watch:{items:{handler(){this.updateVisibleItems(!0)},deep:!0},pageMode(){this.applyPageMode(),this.updateVisibleItems(!0)},itemHeight:"setDirty"},created(){this.$_ready=!1,this.$_startIndex=0,this.$_oldScrollTop=null,this.$_oldScrollBottom=null,this.$_offsetTop=0,this.$_height=0,this.$_scrollDirty=!1,this.$_updateDirty=!1;const e=parseInt(this.prerender);e>0?(this.visibleItems=this.items.slice(0,e),this.$_length=this.visibleItems.length,this.$_endIndex=this.$_length-1,this.$_skip=!0):(this.$_endIndex=0,this.$_length=0,this.$_skip=!1)},mounted(){this.applyPageMode(),this.$nextTick(()=>{this.updateVisibleItems(!0),this.$_ready=!0})},methods:{updateVisibleItems(e=!1){this.$_updateDirty||(this.$_updateDirty=!0,this.$nextTick(()=>{this.$_updateDirty=!1;const t=this.items.length,n=this.getScroll(),r=this.items,s=this.itemHeight;let o,l;if(n){let a=-1,c=-1;const h=parseInt(this.buffer),d=parseInt(this.poolSize),u=~~(n.top/d)*d-h,f=Math.ceil(n.bottom/d)*d+h;if(!e&&(u===this.$_oldScrollTop&&f===this.$_oldScrollBottom||this.$_skip))return void(this.$_skip=!1);if(this.$_oldScrollTop=u,this.$_oldScrollBottom=f,null===s){const e=this.heights;let i,n,s=0,h=t-1,d=~~(t/2);do{n=d,i=e[d].accumulator,i<u?s=d:d<t-1&&e[d+1].accumulator>u&&(h=d),d=~~((s+h)/2)}while(d!==n);for(d<0&&(d=0),a=d,l=d>0?e[d-1].accumulator:0,o=e[t-1].accumulator,c=d;c<t&&e[c].accumulator<f;c++);-1===c?c=r.length-1:(c++,c>t&&(c=t))}else a=~~(u/s),c=Math.ceil(f/s),a<0&&(a=0),c>t&&(c=t),l=a*s,o=t*s;c-a>i.itemsLimit&&this.itemsLimitError(),(e||this.$_startIndex!==a||this.$_endIndex!==c||this.$_offsetTop!==l||this.$_height!==o||this.$_length!==t)&&(this.keysEnabled=!(a>this.$_endIndex||c<this.$_startIndex),this.itemContainerStyle={height:o+"px"},this.itemsStyle={marginTop:l+"px"},this.delayPreviousItems?(this.visibleItems=r.slice(this.$_startIndex,c),this.$nextTick(()=>{this.visibleItems=r.slice(a,c)})):this.visibleItems=r.slice(a,c),this.emitUpdate&&this.$emit("update",a,c),this.$_startIndex=a,this.$_endIndex=c,this.$_length=t,this.$_offsetTop=l,this.$_height=o)}}))},setDirty(){this.$_oldScrollTop=null,this.$_oldScrollBottom=null},handleScroll(){this.$_scrollDirty||(this.$_scrollDirty=!0,requestAnimationFrame(()=>{this.$_scrollDirty=!1,this.updateVisibleItems()}))},handleResize(){this.$emit("resize"),this.$_ready&&this.updateVisibleItems()},handleVisibilityChange(e,t){this.$_ready&&(e||0!==t.boundingClientRect.width||0!==t.boundingClientRect.height)&&(this.$emit("visible"),this.$nextTick(()=>{this.updateVisibleItems()}))}}};$.render=function(e,i,n,r,s,o){const l=t.resolveComponent("resize-observer"),a=t.resolveDirective("observe-visibility");return t.withDirectives((t.openBlock(),t.createBlock(t.resolveDynamicComponent(n.mainTag),{class:t.normalizeClass([e.cssClass,"virtual-scroller"]),onScrollPassive:o.handleScroll},{default:t.withCtx(()=>[t.renderSlot(e.$slots,"before-container"),(t.openBlock(),t.createBlock(t.resolveDynamicComponent(n.containerTag),{ref:"itemContainer",class:t.normalizeClass([n.containerClass,"item-container"]),style:t.normalizeStyle(s.itemContainerStyle)},{default:t.withCtx(()=>[t.renderSlot(e.$slots,"before-content"),(t.openBlock(),t.createBlock(t.resolveDynamicComponent(n.contentTag),{ref:"items",class:t.normalizeClass([n.contentClass,"items"]),style:t.normalizeStyle(s.itemsStyle)},{default:t.withCtx(()=>[n.renderers?(t.openBlock(!0),t.createElementBlock(t.Fragment,{key:0},t.renderList(s.visibleItems,(i,r)=>(t.openBlock(),t.createBlock(t.resolveDynamicComponent(n.renderers[i[e.typeField]]),{key:s.keysEnabled&&i[n.keyField]||void 0,item:i,"item-index":e.$_startIndex+r,class:"item"},null,8,["item","item-index"]))),128)):(t.openBlock(!0),t.createElementBlock(t.Fragment,{key:1},t.renderList(s.visibleItems,(i,r)=>t.renderSlot(e.$slots,"default",{item:i,itemIndex:e.$_startIndex+r,itemKey:s.keysEnabled&&i[n.keyField]||void 0,class:"item"})),256))]),_:3},8,["class","style"])),t.renderSlot(e.$slots,"after-content")]),_:3},8,["class","style"])),t.renderSlot(e.$slots,"after-container"),t.createVNode(l,{onNotify:o.handleResize},null,8,["onNotify"])]),_:3},40,["class","onScrollPassive"])),[[a,o.handleVisibilityChange]])},$.__scopeId="data-v-727d6836",$.__file="src/components/VirtualScroller.vue";var S={version:"1.1.1",install:function(e,t){var n=Object.assign({},{installComponents:!0,componentsPrefix:""},t);for(var r in n)void 0!==n[r]&&(i[r]=n[r]);n.installComponents&&function(e,t){e.component("".concat(t,"virtual-scroller"),$)}(e,n.componentsPrefix)}};return e.VirtualScroller=$,e.default=S,Object.defineProperty(e,"__esModule",{value:!0}),e}({},Vue);
//# sourceMappingURL=vue-virtual-scroller-classic.min.js.map
